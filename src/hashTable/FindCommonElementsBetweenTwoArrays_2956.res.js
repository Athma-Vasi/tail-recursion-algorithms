// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Core__Array from "@rescript/core/src/Core__Array.res.js";

function findCommonElementsBetweenTwoArrays(nums1, nums2) {
  var makeFreqTable = function (freqTable, nums, _index) {
    while(true) {
      var index = _index;
      if (index === nums.length) {
        return freqTable;
      }
      var n = nums.at(index);
      var num = n !== undefined ? n : 0;
      var c = freqTable.get(num);
      var existingCount = c !== undefined ? c : 0;
      freqTable.set(num, existingCount + 1 | 0);
      _index = index + 1 | 0;
      continue ;
    };
  };
  var freqTable1 = makeFreqTable(new Map(), nums1, 0);
  var freqTable2 = makeFreqTable(new Map(), nums2, 0);
  var nums1Set = new Set(nums1);
  var nums2Set = new Set(nums2);
  var count1 = Core__Array.reduce(Array.from(freqTable1.entries()), 0, (function (acc, tuple) {
          if (nums2Set.has(tuple[0])) {
            return acc + tuple[1] | 0;
          } else {
            return acc;
          }
        }));
  var count2 = Core__Array.reduce(Array.from(freqTable2.entries()), 0, (function (acc, tuple) {
          if (nums1Set.has(tuple[0])) {
            return acc + tuple[1] | 0;
          } else {
            return acc;
          }
        }));
  return [
          count1,
          count2
        ];
}

var n1 = [
  2,
  3,
  2
];

var n11 = [
  1,
  2
];

var r1 = findCommonElementsBetweenTwoArrays(n1, n11);

console.log("r1: ", r1);

var n2 = [
  4,
  3,
  2,
  3,
  1
];

var n22 = [
  2,
  2,
  5,
  2,
  3,
  6
];

var r2 = findCommonElementsBetweenTwoArrays(n2, n22);

console.log("r2: ", r2);

var n3 = [
  3,
  4,
  2,
  3
];

var n33 = [
  1,
  5
];

var r3 = findCommonElementsBetweenTwoArrays(n3, n33);

console.log("r3: ", r3);

export {
  findCommonElementsBetweenTwoArrays ,
  n1 ,
  n11 ,
  r1 ,
  n2 ,
  n22 ,
  r2 ,
  n3 ,
  n33 ,
  r3 ,
}
/* r1 Not a pure module */
