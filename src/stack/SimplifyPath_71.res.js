// Generated by ReScript, PLEASE EDIT WITH CARE


function simplifyPath(path) {
  var pathArray = path.split("/").filter(function (v) {
        return v.length > 0;
      });
  var _pathStack = "";
  var _index = 0;
  while(true) {
    var index = _index;
    var pathStack = _pathStack;
    var stackLength = pathStack.length;
    if (index === pathArray.length) {
      return pathStack;
    }
    var co = pathArray.at(index);
    var command = co !== undefined ? co : "";
    var previous = pathStack.charAt(stackLength - 1 | 0);
    switch (command) {
      case "." :
          _index = index + 1 | 0;
          continue ;
      case ".." :
          _index = index + 1 | 0;
          _pathStack = previous === "/" ? pathStack : (
              previous.length === 0 ? "/" : pathStack.slice(0, stackLength - 2 | 0)
            );
          continue ;
      default:
        _index = index + 1 | 0;
        _pathStack = pathStack.concat(previous === "/" ? command : "/" + command);
        continue ;
    }
  };
}

var p1 = "/home/";

var r1 = simplifyPath(p1);

console.log("r1: ", r1, r1 === "/home");

var p2 = "/../";

var r2 = simplifyPath(p2);

console.log("r2: ", r2, r2 === "/");

var p3 = "/home//foo/";

var r3 = simplifyPath(p3);

console.log("r3: ", r3, r3 === "/home/foo");

var p4 = "/a/./b/../../c/";

var r4 = simplifyPath(p4);

console.log("r4: ", r4, r4 === "/c");

export {
  simplifyPath ,
  p1 ,
  r1 ,
  p2 ,
  r2 ,
  p3 ,
  r3 ,
  p4 ,
  r4 ,
}
/* r1 Not a pure module */
